"use strict";function _interopDefault(ex){return ex&&typeof ex==="object"&&"default"in ex?ex["default"]:ex}var EventEmitter=_interopDefault(require("events"));var Plugin=_interopDefault(require("graphql-factory-plugin"));var graphql=require("graphql");var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var asyncGenerator=function(){function AwaitValue(value){this.value=value}function AsyncGenerator(gen){var front,back;function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};if(back){back=back.next=request}else{front=back=request;resume(key,arg)}})}function resume(key,arg){try{var result=gen[key](arg);var value=result.value;if(value instanceof AwaitValue){Promise.resolve(value.value).then(function(arg){resume("next",arg)},function(arg){resume("throw",arg)})}else{settle(result.done?"return":"normal",result.value)}}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:true});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:false});break}front=front.next;if(front){resume(front.key,front.arg)}else{back=null}}this._invoke=send;if(typeof gen.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}}AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)};AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)};AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)};return{wrap:function(fn){return function(){return new AsyncGenerator(fn.apply(this,arguments))}},await:function(value){return new AwaitValue(value)}}}();var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var defineProperty$2=function(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};var inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self};var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var freeGlobal=(typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var _Symbol=root.Symbol;var objectProto$3=Object.prototype;var hasOwnProperty$3=objectProto$3.hasOwnProperty;var nativeObjectToString=objectProto$3.toString;var symToStringTag$1=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty$3.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag$1]=tag}else{delete value[symToStringTag$1]}}return result}var objectProto$4=Object.prototype;var nativeObjectToString$1=objectProto$4.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag="[object Null]";var undefinedTag="[object Undefined]";var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof(value);return value!=null&&(type=="object"||type=="function")}var asyncTag="[object AsyncFunction]";var funcTag="[object Function]";var genTag="[object GeneratorFunction]";var proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto$1=Function.prototype;var funcToString$1=funcProto$1.toString;function toSource(func){if(func!=null){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype;var objectProto$2=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty$2=objectProto$2.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function eq(value,other){return value===other||value!==value&&other!==other}var objectProto$1=Object.prototype;var hasOwnProperty$1=objectProto$1.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty$1.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}function identity(value){return value}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function constant(value){return function(){return value}}var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};var HOT_COUNT=800;var HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}var setToString=shortOut(baseSetToString);function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var MAX_SAFE_INTEGER$1=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER$1:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index==="undefined"?"undefined":_typeof(index);if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}var objectProto$5=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$5;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function isObjectLike(value){return value!=null&&(typeof value==="undefined"?"undefined":_typeof(value))=="object"}var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;var propertyIsEnumerable=objectProto$7.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$5.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;function stubFalse(){return false}var freeExports=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1="[object Arguments]";var arrayTag="[object Array]";var boolTag="[object Boolean]";var dateTag="[object Date]";var errorTag="[object Error]";var funcTag$1="[object Function]";var mapTag="[object Map]";var numberTag="[object Number]";var objectTag="[object Object]";var regexpTag="[object RegExp]";var setTag="[object Set]";var stringTag="[object String]";var weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]";var dataViewTag="[object DataView]";var float32Tag="[object Float32Array]";var float64Tag="[object Float64Array]";var int8Tag="[object Int8Array]";var int16Tag="[object Int16Array]";var int32Tag="[object Int32Array]";var uint8Tag="[object Uint8Array]";var uint8ClampedTag="[object Uint8ClampedArray]";var uint16Tag="[object Uint16Array]";var uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$4.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$6.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key])}}});function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var symbolTag="[object Symbol]";function isSymbol(value){return(typeof value==="undefined"?"undefined":_typeof(value))=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}var INFINITY=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined;var symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toString(value){return value==null?"":baseToString(value)}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end)}var rsAstralRange="\\ud800-\\udfff";var rsComboMarksRange="\\u0300-\\u036f";var reComboHalfMarksRange="\\ufe20-\\ufe2f";var rsComboSymbolsRange="\\u20d0-\\u20ff";var rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange;var rsVarRange="\\ufe0e\\ufe0f";var rsZWJ="\\u200d";var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");function hasUnicode(string){return reHasUnicode.test(string)}function asciiToArray(string){return string.split("")}var rsAstralRange$1="\\ud800-\\udfff";var rsComboMarksRange$1="\\u0300-\\u036f";var reComboHalfMarksRange$1="\\ufe20-\\ufe2f";var rsComboSymbolsRange$1="\\u20d0-\\u20ff";var rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1;var rsVarRange$1="\\ufe0e\\ufe0f";var rsAstral="["+rsAstralRange$1+"]";var rsCombo="["+rsComboRange$1+"]";var rsFitz="\\ud83c[\\udffb-\\udfff]";var rsModifier="(?:"+rsCombo+"|"+rsFitz+")";var rsNonAstral="[^"+rsAstralRange$1+"]";var rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}";var rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]";var rsZWJ$1="\\u200d";var reOptMod=rsModifier+"?";var rsOptVar="["+rsVarRange$1+"]?";var rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*";var rsSeq=rsOptVar+reOptMod+rsOptJoin;var rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(string){return string.match(reUnicode)||[]}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}var upperFirst=createCaseFirst("toUpperCase");function capitalize(string){return upperFirst(toString(string).toLowerCase())}function castArray(){if(!arguments.length){return[]}var value=arguments[0];return isArray(value)?value:[value]}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}var baseEach=createBaseEach(baseForOwn);function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function listCacheClear(){this.__data__=[];this.size=0}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var Map=getNative(root,"Map");var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto$9=Object.prototype;var hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty$7.call(data,key)?data[key]:undefined}var objectProto$10=Object.prototype;var hasOwnProperty$8=objectProto$10.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty$8.call(data,key)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(value){var type=typeof value==="undefined"?"undefined":_typeof(value);return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED$2);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG$2=1;var COMPARE_UNORDERED_FLAG$1=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$2,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG$1?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}var Uint8Array=root.Uint8Array;function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var COMPARE_PARTIAL_FLAG$3=1;var COMPARE_UNORDERED_FLAG$2=2;var boolTag$1="[object Boolean]";var dateTag$1="[object Date]";var errorTag$1="[object Error]";var mapTag$1="[object Map]";var numberTag$1="[object Number]";var regexpTag$1="[object RegExp]";var setTag$1="[object Set]";var stringTag$1="[object String]";var symbolTag$1="[object Symbol]";var arrayBufferTag$1="[object ArrayBuffer]";var dataViewTag$1="[object DataView]";var symbolProto$1=_Symbol?_Symbol.prototype:undefined;var symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag$1:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag$1:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+object,+other);case errorTag$1:return object.name==other.name&&object.message==other.message;case regexpTag$1:case stringTag$1:return object==other+"";case mapTag$1:var convert=mapToArray;case setTag$1:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$3;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$2;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function stubArray(){return[]}var objectProto$13=Object.prototype;var propertyIsEnumerable$1=objectProto$13.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)})};function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var COMPARE_PARTIAL_FLAG$4=1;var objectProto$12=Object.prototype;var hasOwnProperty$10=objectProto$12.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$4,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$10.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}var DataView=getNative(root,"DataView");var Promise$1=getNative(root,"Promise");var Set=getNative(root,"Set");var WeakMap=getNative(root,"WeakMap");var mapTag$2="[object Map]";var objectTag$2="[object Object]";var promiseTag="[object Promise]";var setTag$2="[object Set]";var weakMapTag$1="[object WeakMap]";var dataViewTag$2="[object DataView]";var dataViewCtorString=toSource(DataView);var mapCtorString=toSource(Map);var promiseCtorString=toSource(Promise$1);var setCtorString=toSource(Set);var weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$2||Map&&getTag(new Map)!=mapTag$2||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$2||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag$2?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var COMPARE_PARTIAL_FLAG$1=1;var argsTag$2="[object Arguments]";var arrayTag$1="[object Array]";var objectTag$1="[object Object]";var objectProto$11=Object.prototype;var hasOwnProperty$9=objectProto$11.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),othTag=othIsArr?arrayTag$1:getTag$1(other);objTag=objTag==argsTag$2?objectTag$1:objTag;othTag=othTag==argsTag$2?objectTag$1:othTag;var objIsObj=objTag==objectTag$1,othIsObj=othTag==objectTag$1,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$1)){var objIsWrapped=objIsObj&&hasOwnProperty$9.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty$9.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}var COMPARE_PARTIAL_FLAG=1;var COMPARE_UNORDERED_FLAG=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}function isStrictComparable(value){return value===value&&!isObject(value)}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/;var reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value==="undefined"?"undefined":_typeof(value);if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}var reLeadingDot=/^\./;var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var INFINITY$1=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY$1?"-0":result}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function get$1(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function baseHasIn(object,key){return object!=null&&key in Object(object)}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1;var COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get$1(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if((typeof value==="undefined"?"undefined":_typeof(value))=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,baseIteratee(predicate,3))}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection);predicate=function predicate(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}var NAN=0/0;var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var INFINITY$2=1/0;var MAX_INTEGER=1.7976931348623157e308;function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY$2||value===-INFINITY$2){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}var nativeMax$1=Math.max;function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax$1(length+index,0)}return baseFindIndex(array,baseIteratee(predicate,3),index)}var find=createFind(findIndex);function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function castFunction(value){return typeof value=="function"?value:identity}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,castFunction(iteratee))}var objectProto$14=Object.prototype;var hasOwnProperty$11=objectProto$14.hasOwnProperty;function baseHas(object,key){return object!=null&&hasOwnProperty$11.call(object,key)}function has(object,path){return object!=null&&hasPath(object,path,baseHas)}function baseIsNaN(value){return value!==value}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}var stringTag$2="[object String]";function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag$2}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function values(object){return object==null?[]:baseValues(object,keys(object))}var nativeMax$2=Math.max;function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax$2(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var numberTag$2="[object Number]";function isNumber(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag$2}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee,3))}function noop(){}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}var objectProto$15=Object.prototype;var hasOwnProperty$12=objectProto$15.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty$12.call(object,key)))){result.push(key)}}return result}function keysIn$1(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn$1(source),object)}var freeExports$2=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule$2=freeExports$2&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2;var Buffer$1=moduleExports$2?root.Buffer:undefined;var allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}var getPrototype=overArg(Object.getPrototypeOf,Object);var nativeGetSymbols$1=Object.getOwnPropertySymbols;var getSymbolsIn=!nativeGetSymbols$1?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn$1,getSymbolsIn)}var objectProto$16=Object.prototype;var hasOwnProperty$13=objectProto$16.hasOwnProperty;function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty$13.call(array,"index")){result.index=array.index;result.input=array.input}return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}var CLONE_DEEP_FLAG$2=1;function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG$2):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}var reFlags=/\w*$/;function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function addSetEntry(set,value){set.add(value);return set}var CLONE_DEEP_FLAG$3=1;function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG$3):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}var symbolProto$2=_Symbol?_Symbol.prototype:undefined;var symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:undefined;function cloneSymbol(symbol){return symbolValueOf$1?Object(symbolValueOf$1.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}var boolTag$3="[object Boolean]";var dateTag$3="[object Date]";var mapTag$4="[object Map]";var numberTag$4="[object Number]";var regexpTag$3="[object RegExp]";var setTag$4="[object Set]";var stringTag$4="[object String]";var symbolTag$3="[object Symbol]";var arrayBufferTag$3="[object ArrayBuffer]";var dataViewTag$4="[object DataView]";var float32Tag$2="[object Float32Array]";var float64Tag$2="[object Float64Array]";var int8Tag$2="[object Int8Array]";var int16Tag$2="[object Int16Array]";var int32Tag$2="[object Int32Array]";var uint8Tag$2="[object Uint8Array]";var uint8ClampedTag$2="[object Uint8ClampedArray]";var uint16Tag$2="[object Uint16Array]";var uint32Tag$2="[object Uint32Array]";function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag$3:return cloneArrayBuffer(object);case boolTag$3:case dateTag$3:return new Ctor(+object);case dataViewTag$4:return cloneDataView(object,isDeep);case float32Tag$2:case float64Tag$2:case int8Tag$2:case int16Tag$2:case int32Tag$2:case uint8Tag$2:case uint8ClampedTag$2:case uint16Tag$2:case uint32Tag$2:return cloneTypedArray(object,isDeep);case mapTag$4:return cloneMap(object,isDeep,cloneFunc);case numberTag$4:case stringTag$4:return new Ctor(object);case regexpTag$3:return cloneRegExp(object);case setTag$4:return cloneSet(object,isDeep,cloneFunc);case symbolTag$3:return cloneSymbol(object)}}var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}var CLONE_DEEP_FLAG$1=1;var CLONE_FLAT_FLAG$1=2;var CLONE_SYMBOLS_FLAG$1=4;var argsTag$3="[object Arguments]";var arrayTag$2="[object Array]";var boolTag$2="[object Boolean]";var dateTag$2="[object Date]";var errorTag$2="[object Error]";var funcTag$2="[object Function]";var genTag$1="[object GeneratorFunction]";var mapTag$3="[object Map]";var numberTag$3="[object Number]";var objectTag$3="[object Object]";var regexpTag$2="[object RegExp]";var setTag$3="[object Set]";var stringTag$3="[object String]";var symbolTag$2="[object Symbol]";var weakMapTag$2="[object WeakMap]";var arrayBufferTag$2="[object ArrayBuffer]";var dataViewTag$3="[object DataView]";var float32Tag$1="[object Float32Array]";var float64Tag$1="[object Float64Array]";var int8Tag$1="[object Int8Array]";var int16Tag$1="[object Int16Array]";var int32Tag$1="[object Int32Array]";var uint8Tag$1="[object Uint8Array]";var uint8ClampedTag$1="[object Uint8ClampedArray]";var uint16Tag$1="[object Uint16Array]";var uint32Tag$1="[object Uint32Array]";var cloneableTags={};cloneableTags[argsTag$3]=cloneableTags[arrayTag$2]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$1]=cloneableTags[float64Tag$1]=cloneableTags[int8Tag$1]=cloneableTags[int16Tag$1]=cloneableTags[int32Tag$1]=cloneableTags[mapTag$3]=cloneableTags[numberTag$3]=cloneableTags[objectTag$3]=cloneableTags[regexpTag$2]=cloneableTags[setTag$3]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$1]=cloneableTags[uint8ClampedTag$1]=cloneableTags[uint16Tag$1]=cloneableTags[uint32Tag$1]=true;cloneableTags[errorTag$2]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG$1,isFlat=bitmask&CLONE_FLAT_FLAG$1,isFull=bitmask&CLONE_SYMBOLS_FLAG$1;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag$1(value),isFunc=tag==funcTag$2||tag==genTag$1;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag$3||tag==argsTag$3||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}var objectTag$4="[object Object]";var funcProto$2=Function.prototype;var objectProto$17=Object.prototype;var funcToString$2=funcProto$2.toString;var hasOwnProperty$14=objectProto$17.hasOwnProperty;var objectCtorString=funcToString$2.call(Object);function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag$4){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty$14.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString$2.call(Ctor)==objectCtorString}function customOmitClone(value){return isPlainObject(value)?undefined:value}var spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}var CLONE_DEEP_FLAG=1;var CLONE_FLAT_FLAG=2;var CLONE_SYMBOLS_FLAG=4;var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection)});return accumulator}function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,baseIteratee(iteratee,4),accumulator,initAccum,baseEach)}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}function set$1(object,path,value){return object==null?object:baseSet(object,path,value)}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true}}return false}var INFINITY$3=1/0;var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY$3)?noop:function(values){return new Set(values)};var LARGE_ARRAY_SIZE$1=200;function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE$1){var set=iteratee?null:createSet(array);if(set){return setToArray(set)}isCommon=false;includes=cacheHas;seen=new SetCache}else{seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed)}result.push(value)}}return result}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true))});function uniq(array){return array&&array.length?baseUniq(array):[]}var LARGE_ARRAY_SIZE$2=200;function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result}if(iteratee){values=arrayMap(values,baseUnary(iteratee))}if(comparator){includes=arrayIncludesWith;isCommon=false}else if(values.length>=LARGE_ARRAY_SIZE$2){includes=cacheHas;isCommon=false;values=new SetCache(values)}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer}}result.push(value)}else if(!includes(values,computed,comparator)){result.push(value)}}return result}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]});var _={assign:assign,capitalize:capitalize,castArray:castArray,filter:filter,find:find,forEach:forEach,get:get$1,has:has,identity:identity,includes:includes,isArray:isArray,isFunction:isFunction,isNumber:isNumber,isObject:isObject,isString:isString,keys:keys,map:map,noop:noop,omit:omit,reduce:reduce,set:set$1,union:union,uniq:uniq,values:values,without:without};var LITERAL_RX=/^```([\w]+)```$/;var DIRECTIVE_RX=/^@/;function isHash(obj){return _.isObject(obj)&&!_.isArray(obj)}function constructorName(obj){return _.get(obj,"constructor.name")}function getType(obj){if(Array.isArray(obj)){return["array",obj]}else if(obj==="undefined"){return["undefined","undefined"]}else if(obj===null){return["null","null"]}else if(typeof obj==="string"){if(obj.match(LITERAL_RX)){return["literal",obj.replace(LITERAL_RX,"$1")]}return["string",'"'+obj+'"']}else if(typeof obj==="number"){return String(obj).indexOf(".")!==-1?["float",String(obj)]:["int",String(obj)]}else if(typeof obj==="boolean"){return["boolean",String(obj)]}else if(obj instanceof Date){return["date",JSON.stringify(obj)]}return[typeof obj==="undefined"?"undefined":_typeof(obj),obj]}function toArgs(obj){var replaceBraces=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _getType=getType(obj),_getType2=slicedToArray(_getType,2),type=_getType2[0],value=_getType2[1];var result=void 0;switch(type){case"undefined":break;case"array":result="["+_.map(value,function(v){return toArgs(v)}).join(", ")+"]";break;case"object":result="{"+_.map(value,function(v,k){return k+": "+toArgs(v)}).join(", ")+"}";break;default:result=value;break}return replaceBraces?result.replace(/^[{[]([\S\s]+)[}\]]$/,"$1"):result}function getDirectives(definition,reason){var directives={};_.forEach(definition,function(value,key){if(key.match(DIRECTIVE_RX)){directives[key]=value}});if(_.isString(reason))directives.deprecated={reason:reason};if(!_.keys(directives).length)return"";return" "+_.map(directives,function(value,name){return!isHash(value)?""+name:name+"("+toArgs(value,true)+")"}).join(" ")}function definitionKey(kind){switch(kind){case graphql.Kind.SCHEMA_DEFINITION:return"schemas";case graphql.Kind.DIRECTIVE_DEFINITION:return"directives";case graphql.Kind.TYPE_EXTENSION_DEFINITION:return"extensions";case graphql.Kind.SCALAR_TYPE_DEFINITION:case graphql.Kind.OBJECT_TYPE_DEFINITION:case graphql.Kind.INPUT_OBJECT_TYPE_DEFINITION:case graphql.Kind.ENUM_TYPE_DEFINITION:case graphql.Kind.UNION_TYPE_DEFINITION:case graphql.Kind.INTERFACE_TYPE_DEFINITION:return"types";case"Function":return"functions";default:return null}}function indent(){var count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"  ";return new Array(count).fill(value).join("")}function stringValue(str){return _.isString(str)&&str!==""}var _ref;var _ref2;var ENUM_RESERVED=["hasKey","hasValue","_keys","_values"];var Enum=function Enum(config,options){var _this=this;classCallCheck(this,Enum);var error=null;this._keys=[];this._values=[];this.hasValue=function(value){return _this._values.indexOf(value)!==-1};this.hasKey=function(key){return _this._keys.indexOf(key)!==-1};var _config=!_.isArray(config)?config:_.reduce(config,function(accum,item){accum[item]=item;return accum});_.forEach(_config,function(value,key){if(_this.hasKey(key)){error=new Error('NewEnumError: Duplicate Enum key "'+key+'"');return false}else if(_this.hasValue(value)&&!_.get(options,"allowDuplicates")){error=new Error("NewEnumError: Duplicate Enum value "+value);return false}else if(ENUM_RESERVED.indexOf(key)!==-1){error=new Error('NewEnumError: Enum key "'+key+'" is reserved and cannot be used');return false}_this._keys.push(key);_this._values.push(value);_this[key]=value});if(error)throw error;return new Proxy(this,{get:function get$$1(target,key){if(!_.has(target,[key])){throw new Error("Invalid Enum value "+key)}return target[key]},set:function set$$1(){throw new Error("Enum type cannot be modified")},has:function has(target,key){return _.has(target,key)},deleteProperty:function deleteProperty(){throw new Error("Enum type cannot be modified")},defineProperty:function defineProperty(){throw new Error("Enum type cannot be modified")}})};var MiddlewareTypes=new Enum({BEFORE:"before",AFTER:"after",ERROR:"error",RESOLVE:"resolve"});var SchemaOperations=new Enum({QUERY:"query",MUTATION:"mutation",SUBSCRIPTION:"subscription"});var EventTypes=new Enum({REQUEST:"request",FATAL:"fatal",ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",TRACE:"trace"});var LocationKind=new Enum((_ref={},defineProperty$2(_ref,graphql.DirectiveLocation.QUERY,graphql.Kind.OPERATION_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.MUTATION,graphql.Kind.OPERATION_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.SUBSCRIPTION,graphql.Kind.OPERATION_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.FIELD,graphql.Kind.FIELD),defineProperty$2(_ref,graphql.DirectiveLocation.FRAGMENT_DEFINITION,graphql.Kind.FRAGMENT_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.FRAGMENT_SPREAD,graphql.Kind.FRAGMENT_SPREAD),defineProperty$2(_ref,graphql.DirectiveLocation.INLINE_FRAGMENT,graphql.Kind.INLINE_FRAGMENT),defineProperty$2(_ref,graphql.DirectiveLocation.SCHEMA,graphql.Kind.SCHEMA_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.SCALAR,graphql.Kind.SCALAR_TYPE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.OBJECT,graphql.Kind.OBJECT_TYPE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.FIELD_DEFINITION,graphql.Kind.FIELD_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.ARGUMENT_DEFINITION,graphql.Kind.ARGUMENT),defineProperty$2(_ref,graphql.DirectiveLocation.INTERFACE,graphql.Kind.INTERFACE_TYPE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.UNION,graphql.Kind.UNION_TYPE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.ENUM,graphql.Kind.ENUM_TYPE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.ENUM_VALUE,graphql.Kind.ENUM_VALUE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.INPUT_OBJECT,graphql.Kind.INPUT_OBJECT_TYPE_DEFINITION),defineProperty$2(_ref,graphql.DirectiveLocation.INPUT_FIELD_DEFINITION,graphql.Kind.INPUT_VALUE_DEFINITION),_ref),{allowDuplicates:true});var KindLocation=new Enum((_ref2={},defineProperty$2(_ref2,graphql.Kind.OPERATION_DEFINITION,graphql.DirectiveLocation.QUERY),defineProperty$2(_ref2,graphql.Kind.OPERATION_DEFINITION,graphql.DirectiveLocation.MUTATION),defineProperty$2(_ref2,graphql.Kind.OPERATION_DEFINITION,graphql.DirectiveLocation.SUBSCRIPTION),defineProperty$2(_ref2,graphql.Kind.FIELD,graphql.DirectiveLocation.FIELD),defineProperty$2(_ref2,graphql.Kind.FRAGMENT_DEFINITION,graphql.DirectiveLocation.FRAGMENT_DEFINITION),defineProperty$2(_ref2,graphql.Kind.FRAGMENT_SPREAD,graphql.DirectiveLocation.FRAGMENT_SPREAD),defineProperty$2(_ref2,graphql.Kind.INLINE_FRAGMENT,graphql.DirectiveLocation.INLINE_FRAGMENT),defineProperty$2(_ref2,graphql.Kind.SCHEMA_DEFINITION,graphql.DirectiveLocation.SCHEMA),defineProperty$2(_ref2,graphql.Kind.SCALAR_TYPE_DEFINITION,graphql.DirectiveLocation.SCALAR),defineProperty$2(_ref2,graphql.Kind.OBJECT_TYPE_DEFINITION,graphql.DirectiveLocation.OBJECT),defineProperty$2(_ref2,graphql.Kind.FIELD_DEFINITION,graphql.DirectiveLocation.FIELD_DEFINITION),defineProperty$2(_ref2,graphql.Kind.ARGUMENT,graphql.DirectiveLocation.ARGUMENT_DEFINITION),defineProperty$2(_ref2,graphql.Kind.INTERFACE_TYPE_DEFINITION,graphql.DirectiveLocation.INTERFACE),defineProperty$2(_ref2,graphql.Kind.UNION_TYPE_DEFINITION,graphql.DirectiveLocation.UNION),defineProperty$2(_ref2,graphql.Kind.ENUM_TYPE_DEFINITION,graphql.DirectiveLocation.ENUM),defineProperty$2(_ref2,graphql.Kind.ENUM_VALUE_DEFINITION,graphql.DirectiveLocation.ENUM_VALUE),defineProperty$2(_ref2,graphql.Kind.INPUT_OBJECT_TYPE_DEFINITION,graphql.DirectiveLocation.INPUT_OBJECT),defineProperty$2(_ref2,graphql.Kind.INPUT_VALUE_DEFINITION,graphql.DirectiveLocation.INPUT_FIELD_DEFINITION),_ref2),{allowDuplicates:true});var DEFAULT_MIDDLEWARE_TIMEOUT=3e5;var GraphQLFactoryMiddleware=function GraphQLFactoryMiddleware(type,resolve,options){classCallCheck(this,GraphQLFactoryMiddleware);var _ref=isHash(options)?options:{},timeout=_ref.timeout,name=_ref.name;if(!MiddlewareTypes.hasValue(type)){throw new Error("GraphQLFactoryMiddlewareError: "+'Invalid middleware type "'+type+'"')}else if(!_.isFunction(resolve)){throw new Error("GraphQLFactoryMiddlewareError: "+"resolve must be a function")}else if(timeout&&(!_.isNumber(timeout)||timeout<0)){throw new Error("GraphQLFactoryMiddlewareError: "+"Timeout must be an integer greater than or equal to 0")}this.type=type;this.resolve=resolve;this.name=stringValue(name)?name:null;this.identifier=this.name||_.get(resolve,"name")||type;this.timeout=_.isNumber(timeout)?Math.floor(timeout):DEFAULT_MIDDLEWARE_TIMEOUT};GraphQLFactoryMiddleware.canCast=function(middleware){return _.isFunction(middleware)||middleware instanceof GraphQLFactoryMiddleware||isHash(middleware)&&_.has(middleware,"resolve")};GraphQLFactoryMiddleware.cast=function(type,middleware,options){if(middleware instanceof GraphQLFactoryMiddleware){if(MiddlewareTypes.hasValue(type))middleware.type=type;if(isHash(options)&&_.keys(options).length)middleware.options=options;return middleware}else if(_.isFunction(middleware)){return new GraphQLFactoryMiddleware(type,middleware,options)}else if(isHash(middleware)&&_.has(middleware,"resolve")){var resolve=middleware.resolve,name=middleware.name,timeout=middleware.timeout;return new GraphQLFactoryMiddleware(type,resolve,{name:name,timeout:timeout})}throw new Error("Cannot cast middleware, must be Function or Middleware")};function parseAST(nodes){if(Array.isArray(nodes)){return nodes.reduce(function(obj,node){var kind=node.kind,name=node.name,value=node.value,args=node.arguments;switch(kind){case graphql.Kind.DIRECTIVE:obj[name.value]=!Array.isArray(args)||!args.length?true:parseAST(args);break;default:obj[name.value]=value.kind===graphql.Kind.LIST?value.values.map(parseAST):parseAST(value);break}return obj},{})}else if((typeof nodes==="undefined"?"undefined":_typeof(nodes))==="object"&&nodes!==null){var kind=nodes.kind,value=nodes.value,fields=nodes.fields;switch(kind){case graphql.Kind.INT:case graphql.Kind.FLOAT:case graphql.Kind.STRING:case graphql.Kind.BOOLEAN:case graphql.Kind.NULL:return value;case graphql.Kind.OBJECT:return parseAST(fields);default:break}}}function baseName(_ref){var kind=_ref.kind,type=_ref.type,name=_ref.name;switch(kind){case graphql.Kind.LIST_TYPE:case graphql.Kind.NON_NULL_TYPE:return baseName(type);default:return name.value}}function executionPath(info){var path=[];var _info$path=info.path,prev=_info$path.prev,key=_info$path.key;while(_.isString(key)){path.unshift(key);key=_.get(prev,"key");prev=_.get(prev,"prev")}return path}function executionInfo(info){var operation=info.operation,schema=info.schema;var execInfo=[schema];var path=executionPath(info);var operationType=operation.operation;var currentType=schema["_"+operationType+"Type"];execInfo.push(currentType);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=path[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var fieldName=_step.value;var field=_.get(currentType,["_fields",fieldName]);execInfo.push(field);currentType=_.get(field,"type")}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return execInfo}function filterDirectives(info,source){if(!source)return[];var _info$schema=info.schema,_directives=_info$schema._directives,_typeMap=_info$schema._typeMap;var directives=source.directives,kind=source.kind,args=source.arguments,type=source.type;var loc=KindLocation[kind];var results=_.reduce(args,function(result,arg){return result.concat(filterDirectives(info,arg))},[])||[];if(type){var _$get=_.get(_typeMap,baseName(type),{}),astNode=_$get.astNode;results=results.concat(filterDirectives(info,astNode))}_.reduce(directives,function(result,_ref){var name=_ref.name,_args=_ref.arguments;var directive=_.find(_directives,function(d){return d.name===name.value});if(directive&&_.includes(directive.locations,loc)){result.push({directive:name.value,args:parseAST(_args),location:loc})}return result},results);return results}function reduceDirectives(info){return _.reduce(executionInfo(info).reverse(),function(result,nfo){return result.concat(filterDirectives(info,nfo.astNode))},[])}function processMiddleware(schema,backing,definition,params){var _params=slicedToArray(params,4),source=_params[0],args=_params[1],context=_params[2],info=_params[3];var parentType=info.parentType,fieldName=info.fieldName;var directives=reduceDirectives(info);_.noop(directives,source,args,context,parentType,fieldName);return{id:"1",name:"John"}}var cast=GraphQLFactoryMiddleware.cast;var canCast=GraphQLFactoryMiddleware.canCast;function resolverMiddleware(resolver){return function(req,res,next){try{var source=req.source,args=req.args,context=req.context,info=req.info;var nonCircularReq=_.omit(req,["context"]);var ctx=_.assign({},context,{req:nonCircularReq,res:res,next:next});var value=resolver(source,args,ctx,info);return Promise.resolve(value).then(function(result){req.result=result;return next()}).catch(next)}catch(err){return next(err)}}}function addTypeFunction(typeName,funcName,func){if(!stringValue(typeName)){throw new Error('Invalid "typeName" argument, must be String')}else if(!_.isFunction(func)&&!stringValue(func)){throw new Error("Invalid func argument, must be function")}_.set(this.backing,[typeName,"_"+funcName],func);return this}var ResolveBacking=function(){function ResolveBacking(backing){classCallCheck(this,ResolveBacking);this.backing=backing}createClass(ResolveBacking,[{key:"resolve",value:function resolve(typeName,fieldName,_resolve){if(!stringValue(typeName)){throw new Error('Missing required argument "typeName"')}else if(!stringValue(typeName)){throw new Error('Missing required argument "fieldName"')}else if(!_.isFunction(_resolve)&&!stringValue(_resolve)){throw new Error('Invalid "resolve" argument, must be function')}_.set(this.backing,[typeName,fieldName,"resolve"],_resolve);return this}}]);return ResolveBacking}();var ScalarBacking=function(){function ScalarBacking(backing){classCallCheck(this,ScalarBacking);this.backing=isHash(backing)?backing:{}}createClass(ScalarBacking,[{key:"serialize",value:function serialize(type,func){return addTypeFunction.call(this,type,"serialize",func)}},{key:"parseValue",value:function parseValue(type,func){return addTypeFunction.call(this,type,"parseValue",func)}},{key:"parseLiteral",value:function parseLiteral(type,func){return addTypeFunction.call(this,type,"parseLiteral",func)}}]);return ScalarBacking}();var ObjectBacking=function(_ResolveBacking){inherits(ObjectBacking,_ResolveBacking);function ObjectBacking(backing){classCallCheck(this,ObjectBacking);return possibleConstructorReturn(this,(ObjectBacking.__proto__||Object.getPrototypeOf(ObjectBacking)).call(this,backing))}createClass(ObjectBacking,[{key:"isTypeOf",value:function isTypeOf(type,func){return addTypeFunction.call(this,type,"isTypeOf",func)}}]);return ObjectBacking}(ResolveBacking);var InterfaceBacking=function(_ResolveBacking2){inherits(InterfaceBacking,_ResolveBacking2);function InterfaceBacking(backing){classCallCheck(this,InterfaceBacking);return possibleConstructorReturn(this,(InterfaceBacking.__proto__||Object.getPrototypeOf(InterfaceBacking)).call(this,backing))}createClass(InterfaceBacking,[{key:"resolveType",value:function resolveType(type,func){return addTypeFunction.call(this,type,"resolveType",func)}}]);return InterfaceBacking}(ResolveBacking);var UnionBacking=function(){function UnionBacking(backing){classCallCheck(this,UnionBacking);this.backing=isHash(backing)?backing:{}}createClass(UnionBacking,[{key:"resolveType",value:function resolveType(type,func){return addTypeFunction.call(this,type,"resolveType",func)}}]);return UnionBacking}();var GraphQLFactoryBacking=function(){function GraphQLFactoryBacking(backing){classCallCheck(this,GraphQLFactoryBacking);this.backing=isHash(backing)?backing:{}}createClass(GraphQLFactoryBacking,[{key:"merge",value:function merge(backing){var _backing=backing instanceof GraphQLFactoryBacking?backing.backing:backing;_.assign(this.backing,_backing);return this}},{key:"hydrateSchema",value:function hydrateSchema(schema,definition){var _this3=this;var err=null;var backing=this;_.forEach(this.backing,function(typeBacking,typeName){if(err)return false;if(typeName.match(/^@/))return true;var type=_.get(schema,["_typeMap",typeName]);if(!type||!isHash(typeBacking)||!_.keys(typeBacking).length){return true}_.forEach(typeBacking,function(value,key){if(err)return false;try{if(key.match(/^_/)){var path=[key.replace(/^_/,"")];var infoPath=typeName+"."+path[0];var func=definition.lookupFunction(value,infoPath);_.set(type,path,function(){var context=_.assign({},definition.context);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return func.apply(context,args)})}else if(_.isString(value)||canCast(value)){var resolvePath=["_fields",key,"resolve"];var factoryPath=["_fields",key,"_factory","resolve"];var _infoPath=typeName+"."+key+".resolve";var resolver=value instanceof GraphQLFactoryMiddleware?value:_.isString(value)||_.isFunction(value)?resolverMiddleware(definition.lookupFunction(value,_infoPath)):value;var resolveMiddleware=cast(MiddlewareTypes.RESOLVE,resolver);_.set(type,factoryPath,resolveMiddleware);_.set(type,resolvePath,function resolve(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return processMiddleware(schema,backing,definition,args)})}else{throw new Error('Invalid Backing at "'+typeName+"."+key+'", should be '+"Function or Object but found "+(typeof value==="undefined"?"undefined":_typeof(value)))}}catch(backingError){err=backingError;return false}})});_.forEach(schema._directives,function(directive){var name=directive.name;var _$get=_.get(_this3.backing,"@"+name,{}),before=_$get.before,after=_$get.after,error=_$get.error;if(before)directive._before=before;if(after)directive._after=after;if(error)directive._error=error});if(err)throw err;return schema}},{key:"Directive",value:function Directive(name,directive){var directiveBacking={};var _before=directive._before,_after=directive._after,_error=directive._error;if(_before)directiveBacking.before=_before;if(_after)directiveBacking.after=_after;if(_error)directiveBacking.error=_error;if(_.keys(directiveBacking).length){_.set(this.backing,"@"+name,directiveBacking)}}},{key:"Scalar",get:function get$$1(){return new ScalarBacking(this.backing)}},{key:"Object",get:function get$$1(){return new ObjectBacking(this.backing)}},{key:"Interface",get:function get$$1(){return new InterfaceBacking(this.backing)}},{key:"Union",get:function get$$1(){return new UnionBacking(this.backing)}}]);return GraphQLFactoryBacking}();var cast$1=GraphQLFactoryMiddleware.cast;var TYPES=MiddlewareTypes._values.filter(function(value){return value!==MiddlewareTypes.RESOLVE});var GraphQLFactoryDirective=function GraphQLFactoryDirective(config){classCallCheck(this,GraphQLFactoryDirective);var directive=new graphql.GraphQLDirective(config);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=TYPES[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var type=_step.value;var mw=config[type];if(mw){directive["_"+type]=cast$1(type,mw)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return directive};var buildSchema$1=graphql.buildSchema;var GraphQLFactorySchema=function(){function GraphQLFactorySchema(schemaDefinition,nameDefault){classCallCheck(this,GraphQLFactorySchema);var name=schemaDefinition.name,query=schemaDefinition.query,mutation=schemaDefinition.mutation,subscription=schemaDefinition.subscription,description=schemaDefinition.description,directives=schemaDefinition.directives;this._definition=schemaDefinition;this._description=description;this._rootTypes={};this._backing=new GraphQLFactoryBacking;this._directives=_.isArray(directives)?directives:[];this._types={};this.name=name||nameDefault;this.query=this._addRootType(SchemaOperations.QUERY,query);this.mutation=this._addRootType(SchemaOperations.MUTATION,mutation);this.subscription=this._addRootType(SchemaOperations.SUBSCRIPTION,subscription)}createClass(GraphQLFactorySchema,[{key:"_addRootType",value:function _addRootType(type,value){if(_.isObject(value)&&!_.isArray(value)){var name=value.name;var _name=name||_.capitalize(type);this._rootTypes[_name]=(new GraphQLFactoryDefinitionTranslator).translateType(value,_name,this._backing);return _name}else if(_.isString(value)){return value}return null}},{key:"export",value:function _export(definition){if(!isHash(definition))throw new Error("ExportError: Invalid definition");var _types=definition.types,_directives=definition.directives,_backing=definition.backing;var backing=(new GraphQLFactoryBacking).merge(_backing).merge(this._backing);var types=_.assign({},_types,this._rootTypes);var directives=_.reduce(_.uniq(this._directives),function(directiveList,directive){if(_.has(_directives,[directive])){directiveList.push(_directives[directive])}return directiveList},[]);var document=_.values(types).concat(directives).concat(this.definition).join("\n");return{document:document,backing:backing}}},{key:"build",value:function build(definition){var _export2=this.export(definition),document=_export2.document,backing=_export2.backing;var schema=buildSchema$1(document);return backing.hydrateSchema(schema,definition)}},{key:"definition",get:function get$$1(){var _this=this;var _directives=getDirectives(this._definition);var ops=_.reduce(SchemaOperations._values,function(accum,operation){if(_this[operation]){accum.push("  "+operation+": "+_this[operation])}return accum},[]);var def="schema"+_directives+" {\n"+ops.join("\n")+"\n}\n";return _.isString(this._definition)?"# "+this._definition:def}}]);return GraphQLFactorySchema}();var GraphQLFactoryDefinitionTranslator=function(){function GraphQLFactoryDefinitionTranslator(){classCallCheck(this,GraphQLFactoryDefinitionTranslator);this.definition=new GraphQLFactoryDefinition}createClass(GraphQLFactoryDefinitionTranslator,[{key:"_type",value:function _type(typeDef,typeName){var name=typeDef.name,type=typeDef.type,description=typeDef.description;var parts={name:name||typeName,directives:getDirectives(typeDef)};var def=this["_"+(type||"Object")](typeDef,parts);return _.isString(description)?"# "+description+"\n"+def:def}},{key:"_registerFunction",value:function _registerFunction(typeDef,typeName,fnName){var type=typeDef.type||"Object";var fn=_.get(typeDef,[fnName]);if(_.isFunction(fn)||_.isString(fn)){this.definition.backing[type][fnName](typeName,fn)}}},{key:"_Directive",value:function _Directive(definition,directiveName){var name=definition.name,description=definition.description,locations=definition.locations,args=definition.args,before=definition.before,after=definition.after,error=definition.error;var _name=name||directiveName;var _args=this._arguments(args,1);var _locations=_.filter(locations,_.isString);var _loc=_locations.length?_locations.join(" | "):_.values(graphql.DirectiveLocation).join(" | ");this.definition.backing.Directive(_name,new GraphQLFactoryDirective({name:_name,description:description,locations:locations||_.values(graphql.DirectiveLocation),before:before,after:after,error:error}));var directive="directive @"+_name+_args+" on "+_loc+"\n";return _.isString(description)?"# "+description+"\n"+directive:directive}},{key:"_Union",value:function _Union(typeDef,_ref){var name=_ref.name;this._registerFunction(typeDef,name,"resolveType");var types=typeDef.types;var _types=_.isFunction(types)?types():types;return"union "+name+" = "+_types.join(" | ")+"\n"}},{key:"_Scalar",value:function _Scalar(typeDef,_ref2){var name=_ref2.name,directives=_ref2.directives;this._registerFunction(typeDef,name,"serialize");this._registerFunction(typeDef,name,"parseValue");this._registerFunction(typeDef,name,"parseLiteral");return"scalar "+name+directives+"\n"}},{key:"_Enum",value:function _Enum(_ref3,_ref4){var values=_ref3.values;var name=_ref4.name,directives=_ref4.directives;var _values=this._values(values);return"enum "+name+directives+" {\n"+_values+"\n}\n"}},{key:"_Input",value:function _Input(typeDef,_ref5){var name=_ref5.name,directives=_ref5.directives;var fields=this._fields(typeDef);return"input "+name+directives+" {\n"+fields+"\n}\n"}},{key:"_Object",value:function _Object(typeDef,_ref6){var name=_ref6.name,directives=_ref6.directives;this._registerFunction(typeDef,name,"isTypeOf");var interfaces=typeDef.interfaces;var fields=this._fields(typeDef,name);var _interfaces=_.isFunction(interfaces)?interfaces():interfaces;var _iface=_.isArray(_interfaces)&&_interfaces.length?" implements "+_iface.join(", "):"";return"type "+name+_iface+directives+" {\n"+fields+"\n}\n"}},{key:"_Interface",value:function _Interface(typeDef,_ref7){var name=_ref7.name,directives=_ref7.directives;this._registerFunction(typeDef,name,"resolveType");var fields=this._fields(typeDef,name);return"interface "+name+directives+" {\n"+fields+"\n}\n"}},{key:"_fields",value:function _fields(_ref8,parent){var parentType=_ref8.type,fields=_ref8.fields;var _this=this;var tabs=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var _parentType=parentType||"Object";return _.map(fields,function(def,name){var definition=isHash(def)?_parentType==="input"?_.omit(def,["args","resolve","deprecationReason"]):_.omit(def,["defaultValue"]):{type:def};var type=definition.type,args=definition.args,resolve=definition.resolve,deprecationReason=definition.deprecationReason,description=definition.description,defaultValue=definition.defaultValue;if(_.isFunction(resolve)||stringValue(resolve)){_this.definition.backing[_parentType].resolve(parent,name,resolve)}var _directives=getDirectives(definition,deprecationReason);var _default=defaultValue!==undefined?" = "+toArgs(defaultValue,true):"";var _args=_this._arguments(args);var field=""+indent(tabs)+name+_args+": "+type+_default+_directives;return _.isString(description)?indent(tabs)+"# "+description+"\n"+field:field}).join("\n")}},{key:"_arguments",value:function _arguments(args){var tabs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;if(!args||!_.keys(args).length)return"";var _args=_.map(args,function(arg,name){var definition=isHash(arg)?arg:{type:arg};var type=definition.type,defaultValue=definition.defaultValue,description=definition.description;var _directives=getDirectives(definition);var _default=defaultValue===undefined?"":" = "+toArgs(defaultValue);var a=""+indent(tabs)+name+": "+type+_default+_directives;return _.isString(description)?indent(tabs)+"# "+description+"\n"+a:a}).join(",\n");return"(\n"+_args+"\n"+indent(tabs-1)+")"}},{key:"_values",value:function _values(values){var tabs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return _.map(values,function(def,name){var definition=isHash(def)?def:{};var deprecationReason=definition.deprecationReason,description=definition.description;var _directives=getDirectives(definition,deprecationReason);var v=""+indent(tabs)+name+_directives;return _.isString(description)?indent(tabs)+"# "+description+"\n"+v:v}).join("\n")}},{key:"translateType",value:function translateType(typeDef,typeName,backing){if(backing instanceof GraphQLFactoryBacking)this.definition.backing=backing;else if(isHash(backing))this.definition.backing=new GraphQLFactoryBacking(backing);return this._type(typeDef,typeName)}},{key:"translate",value:function translate(factoryDefinition){var _this2=this;_.forEach(factoryDefinition,function(store,storeType){switch(storeType){case"backing":_this2.definition.backing.merge(store);break;case"functions":case"context":_.assign(_this2.definition[storeType],store);break;case"types":_.forEach(store,function(typeDef,typeName){if(typeName.match(/^@/))return true;_this2.definition.addKind(graphql.Kind.OBJECT_TYPE_DEFINITION,_.get(typeDef,"name",typeName),_this2._type(typeDef,typeName))});break;case"schemas":_.forEach(store,function(schemaDef,schemaName){if(schemaName.match(/^@/))return true;_this2.definition.addKind(graphql.Kind.SCHEMA_DEFINITION,_.get(schemaDef,"name",schemaName),new GraphQLFactorySchema(schemaDef,schemaName))});break;case"directives":_.forEach(store,function(directiveDef,directiveName){_this2.definition.addKind(graphql.Kind.DIRECTIVE_DEFINITION,_.get(directiveDef,"name",directiveName),_this2._Directive(directiveDef,directiveName))});break;default:break}});return this.definition}}]);return GraphQLFactoryDefinitionTranslator}();var CAN_MERGE=["context","types","schemas","functions","plugins","directives","warnings"];var GraphQLFactoryDefinition=function(){function GraphQLFactoryDefinition(factory){classCallCheck(this,GraphQLFactoryDefinition);this.factory=factory;this.backing=new GraphQLFactoryBacking;this.context={};this.types={};this.schemas={};this.functions={};this.plugins={};this.directives={};this.error=null;this.warnings=[]}createClass(GraphQLFactoryDefinition,[{key:"use",value:function use(){if(!arguments.length)throw new Error("use requires at least 1 argument");var arg0=arguments.length<=0?undefined:arguments[0];switch(constructorName(arg0)){case"String":this._processDefinition.apply(this,arguments);break;case"Function":this._processFunction.apply(this,arguments);break;case"Object":case"GraphQLFactoryDefinition":this._processFactoryDefinition.apply(this,arguments);break;default:if(arg0 instanceof Plugin||_.isFunction(_.get(arg0,"install"))){this._processPlugin.apply(this,arguments)}else{throw new Error("Unable to process use value")}break}if(this.error instanceof Error){throw this.error}return this}},{key:"build",value:function build(){var _this=this;return _.reduce(this.schemas,function(registry,schema,name){registry[name]=schema.build(_this);return registry},{})}},{key:"merge",value:function merge(definition){var _this2=this;this.backing.merge(definition.backing);_.forEach(CAN_MERGE,function(key){var target=_this2[key];var source=definition[key];if(_.isArray(source)&&_.isArray(target)){_this2[key]=_.union(source,target)}else if(isHash(source)&&isHash(target)){_.assign(target,source)}});return this}},{key:"clone",value:function clone(){var definition=new GraphQLFactoryDefinition(this.factory);definition.error=this.error;return definition.merge(this)}},{key:"lookupFunction",value:function lookupFunction(fn,infoPath){var func=_.isString(fn)?_.get(this,["functions",fn]):fn;if(!_.isFunction(func)){var infoMsg=infoPath?" at "+infoPath:"";throw new Error('Failed to lookup function "'+fn+'"'+infoMsg)}return func}},{key:"addKind",value:function addKind(kind,name,value){var key=definitionKey(kind);var store=_.get(this,[key]);if(!key)throw new Error('Invalid Kind "'+kind+'"');if(Array.isArray(store)){store.push({name:name,value:value})}else if(!this[key][name]){store[name]=value}else{this.warnings.push(kind+' "'+name+'" has already been added')}}},{key:"_processPlugin",value:function _processPlugin(plugin){var name=plugin.name,install=plugin.install;if(name&&!_.has(this.plugins,[name])){this.plugins[name]=plugin;this.merge(plugin);this._processFactoryDefinition(plugin);if(_.isFunction(install))install(this.factory)}}},{key:"_processFunction",value:function _processFunction(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var fn=args[0],name=args[1];if(!_.isFunction(fn)){throw new Error("function must be function")}var _name=_.isString(name)?name:fn.name;this.addKind("Function",_name,fn)}},{key:"_processFactoryDefinition",value:function _processFactoryDefinition(definition){this.merge(new GraphQLFactoryDefinitionTranslator(this.factory).translate(definition))}},{key:"_processDefinition",value:function _processDefinition(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var source=args[0],backing=args[1],schemaName=args[2];if(!_.isString(source)||source===""){throw new Error("source must be String")}var _parse=graphql.parse(source),definitions=_parse.definitions;var _backing=backing;var _name=schemaName;if(_.isString(backing)){_name=backing;_backing=new GraphQLFactoryBacking}if(_backing instanceof GraphQLFactoryBacking||_.isObject(_backing)){this.backing.merge(_backing)}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=definitions[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var definition=_step.value;var kind=_.get(definition,"kind");if(kind===graphql.Kind.SCHEMA_DEFINITION){if(!_.isString(_name)||_name===""){throw new Error("Schema definition requires a name argument in use()")}}else{_name=_.get(definition,"name.value")}this.addKind(kind,_name,graphql.print(definition))}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}]);return GraphQLFactoryDefinition}();var GraphQLFactory=function(_EventEmitter){inherits(GraphQLFactory,_EventEmitter);function GraphQLFactory(){classCallCheck(this,GraphQLFactory);var _this=possibleConstructorReturn(this,(GraphQLFactory.__proto__||Object.getPrototypeOf(GraphQLFactory)).call(this));_this.definition=new GraphQLFactoryDefinition(_this);return _this}createClass(GraphQLFactory,[{key:"use",value:function use(){var _definition;(_definition=this.definition).use.apply(_definition,arguments)}}]);return GraphQLFactory}(EventEmitter);module.exports=GraphQLFactory;
